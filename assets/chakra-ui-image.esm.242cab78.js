import{f as E,b as F,r as o,c as x,t as _}from"./index.60fc590e.js";function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},f.apply(this,arguments)}function O(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function j(e){var t=e.loading,r=e.src,a=e.srcSet,n=e.onLoad,i=e.onError,d=e.crossOrigin,h=e.sizes,u=e.ignoreFallback,v=o.exports.useState("pending"),m=v[0],g=v[1];o.exports.useEffect(function(){g(r?"loading":"pending")},[r]);var c=o.exports.useRef(),b=o.exports.useCallback(function(){if(!!r){s();var l=new Image;l.src=r,d&&(l.crossOrigin=d),a&&(l.srcset=a),h&&(l.sizes=h),t&&(l.loading=t),l.onload=function(k){s(),g("loaded"),n==null||n(k)},l.onerror=function(k){s(),g("failed"),i==null||i(k)},c.current=l}},[r,d,a,h,n,i,t]),s=function(){c.current&&(c.current.onload=null,c.current.onerror=null,c.current=null)};return _(function(){if(!u)return m==="loading"&&b(),function(){s()}},[m,b,u]),u?"loaded":m}var I=["htmlWidth","htmlHeight","alt"],w=["fallbackSrc","fallback","src","srcSet","align","fit","loading","ignoreFallback","crossOrigin"],S=o.exports.forwardRef(function(e,t){var r=e.htmlWidth,a=e.htmlHeight,n=e.alt,i=O(e,I);return o.exports.createElement("img",f({width:r,height:a,ref:t,alt:n},i))}),L=E(function(e,t){var r=e.fallbackSrc,a=e.fallback,n=e.src,i=e.srcSet,d=e.align,h=e.fit,u=e.loading,v=e.ignoreFallback,m=e.crossOrigin,g=O(e,w),c=u!=null||v||r===void 0&&a===void 0,b=j(f({},e,{ignoreFallback:c})),s=f({ref:t,objectFit:h,objectPosition:d},c?g:F(g,["onError","onLoad"]));return b!=="loaded"?a||o.exports.createElement(x.img,f({as:S,className:"chakra-image__placeholder",src:r},s)):o.exports.createElement(x.img,f({as:S,src:n,srcSet:i,crossOrigin:m,loading:u,className:"chakra-image"},s))});export{L as I,j as u};
